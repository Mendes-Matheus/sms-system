<div class="fixed inset-0 bg-gray-500 bg-opacity-75 flex items-center justify-center z-50" [@modalAnimation]>
  <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto m-4">

    <!-- Cabeçalho -->
    <div class="flex justify-between items-center px-6 py-4 border-b border-gray-200">
      <h2 class="text-xl font-semibold text-gray-900">
        Nova Consulta para {{ paciente.nome }}
      </h2>
      <button (click)="fechar.emit()" class="text-gray-400 hover:text-gray-500">
        <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
      </button>
    </div>

    <!-- Formulário -->
    <form #consultaForm="ngForm" (ngSubmit)="salvarConsulta(consultaForm)">
      <div class="p-6 space-y-6">

        <!-- Tipo de Consulta -->
        <div>
          <label for="tipoConsulta" class="block text-sm font-medium text-gray-700 mb-1">Tipo de Consulta *</label>
          <select
            id="tipoConsulta"
            name="tipoConsulta"
            [(ngModel)]="consulta.tipoConsulta"
            required
            #tipoConsulta="ngModel"
            class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
            [class.border-red-500]="tipoConsulta.errors && tipoConsulta.touched"
          >
            <option *ngFor="let tipo of tipoConsultaOptions" [value]="tipo">{{ tipo }}</option>
          </select>
          <div *ngIf="tipoConsulta.errors && tipoConsulta.touched" class="mt-1 text-sm text-red-600">
            <p>Informe o tipo de consulta.</p>
          </div>
        </div>


        <!-- Observações -->
        <div>
          <label for="observacao" class="block text-sm font-medium text-gray-700 mb-1">Observações</label>
          <textarea
            id="observacao"
            name="observacao"
            [(ngModel)]="consulta.observacao"
            rows="3"
            class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"
          ></textarea>
        </div>

      </div>

      <!-- Rodapé -->
      <div class="flex justify-end px-6 py-4 border-t border-gray-200 space-x-3">
        <button type="submit" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors">
          Salvar
        </button>
        <button type="button" (click)="fechar.emit()" class="px-4 py-2 bg-gray-300 text-gray-800 rounded-md hover:bg-gray-400 transition-colors">
          Cancelar
        </button>
      </div>
    </form>
  </div>
</div>
